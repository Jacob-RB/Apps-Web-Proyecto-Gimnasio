<div class="ventas-container">
  <h3>Registro de Ventas</h3>
  <form [formGroup]="ventaForm" (ngSubmit)="registrarVenta()" class="nueva-venta">
    <div class="form-group">
      <select formControlName="client_id">
        <option value="">Seleccione un cliente</option>
        <option *ngFor="let cliente of clientes" [value]="cliente.id">
          {{cliente.nombre}}
        </option>
      </select>
      <div *ngIf="submitted && f['client_id'].errors" class="error-message">
        <div *ngIf="f['client_id'].errors['required']">Debe seleccionar un cliente</div>
      </div>
    </div>

    <div class="form-group">
      <select formControlName="product_id">
        <option value="">Seleccione un producto</option>
        <option *ngFor="let producto of productos" [value]="producto.id">
          {{producto.nombre}} - ${{producto.precio}}
        </option>
      </select>
      <div *ngIf="submitted && f['product_id'].errors" class="error-message">
        <div *ngIf="f['product_id'].errors['required']">Debe seleccionar un producto</div>
      </div>
    </div>

    <div class="form-group">
      <input formControlName="cantidad" type="number" min="1" placeholder="Cantidad">
      <div *ngIf="submitted && f['cantidad'].errors" class="error-message">
        <div *ngIf="f['cantidad'].errors['required']">La cantidad es requerida</div>
        <div *ngIf="f['cantidad'].errors['min']">La cantidad debe ser mayor a 0</div>
      </div>
    </div>

    <button type="submit">Registrar Venta</button>
  </form>

  <table>
    <thead>
      <tr>
        <th>Cliente</th>
        <th>Producto</th>
        <th>Cantidad</th>
        <th>Total</th>
        <th>Fecha</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let venta of ventas">
        <td>{{venta.client?.nombre}}</td>
        <td>{{venta.product?.nombre}}</td>
        <td>{{venta.cantidad}}</td>
        <td>{{venta.total | currency}}</td>
        <td>{{venta.created_at | date}}</td>
      </tr>
    </tbody>
  </table>
</div> 